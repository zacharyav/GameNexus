var B=Object.defineProperty;var b=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var g=(r,t,e)=>t in r?B(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,U=(r,t)=>{for(var e in t||(t={}))y.call(t,e)&&g(r,e,t[e]);if(b)for(var e of b(t))F.call(t,e)&&g(r,e,t[e]);return r};var p=(r,t)=>{var e={};for(var o in r)y.call(r,o)&&t.indexOf(o)<0&&(e[o]=r[o]);if(r!=null&&b)for(var o of b(r))t.indexOf(o)<0&&F.call(r,o)&&(e[o]=r[o]);return e};var x=(r,t,e)=>new Promise((o,w)=>{var h=n=>{try{d(e.next(n))}catch(u){w(u)}},R=n=>{try{d(e.throw(n))}catch(u){w(u)}},d=n=>n.done?o(n.value):Promise.resolve(n.value).then(h,R);d((e=e.apply(r,t)).next())});(function(){"use strict";var u;const r="[modern-screenshot]",e=typeof window!="undefined"?(u=window.navigator)==null?void 0:u.userAgent:"",o=e.includes("Chrome");e.includes("AppleWebKit"),e.includes("Firefox");const w=(...a)=>console.warn(r,...a);function h(a,l){return new Promise((i,s)=>{const c=new FileReader;c.onload=()=>i(c.result),c.onerror=()=>s(c.error),c.onabort=()=>s(new Error(`Failed read blob to ${l}`)),c.readAsDataURL(a)})}const R=a=>h(a,"dataUrl");function d(a){const E=a,{url:l,timeout:i,responseType:s}=E,c=p(E,["url","timeout","responseType"]),m=new AbortController,A=i?setTimeout(()=>m.abort(),i):void 0;return fetch(l,U({signal:m.signal},c)).then(f=>{if(!f.ok)throw new Error("Failed fetch, not 2xx response",{cause:f});switch(s){case"arrayBuffer":return f.arrayBuffer();case"dataUrl":return f.blob().then(R);case"text":default:return f.text()}}).finally(()=>clearTimeout(A))}const n=self;n.onmessage=a=>x(this,null,function*(){const l=a.data,i=l.rawUrl||l.url;try{const s=yield d(l);n.postMessage({url:i,result:s})}catch(s){w(s),n.postMessage({url:i})}})})();
